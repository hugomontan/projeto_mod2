<%- include('../partials/header', { 
    title: usuario && usuario.id ? 'Editar Usuário' : 'Novo Usuário', 
    currentPage: 'usuarios' 
}) %>

<div class="card">
    <div class="card-header">
        <h2 class="card-title">
            <i class="fas fa-<%= usuario && usuario.id ? 'edit' : 'plus' %>"></i>
            <%= usuario && usuario.id ? 'Editar Usuário' : 'Novo Usuário' %>
        </h2>
        <a href="/usuarios" class="btn btn-secondary">
            <i class="fas fa-arrow-left"></i> Voltar
        </a>
    </div>
    
    <div class="card-body">
        <form id="usuario-form" class="ajax-form" 
              action="<%= usuario && usuario.id ? `/api/usuarios/${usuario.id}` : '/api/usuarios' %>" 
              method="<%= usuario && usuario.id ? 'PUT' : 'POST' %>"
              data-redirect="/usuarios">
            
            <% if (usuario && usuario.id) { %>
                <input type="hidden" name="id" value="<%= usuario.id %>">
            <% } %>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="nome" class="form-label">Nome Completo *</label>
                    <input type="text" 
                           id="nome" 
                           name="nome" 
                           class="form-control" 
                           value="<%= usuario && usuario.nome ? usuario.nome : '' %>"
                           required
                           placeholder="Digite o nome completo">
                </div>
                
                <div class="form-group">
                    <label for="email" class="form-label">Email *</label>
                    <input type="email" 
                           id="email" 
                           name="email" 
                           class="form-control" 
                           value="<%= usuario && usuario.email ? usuario.email : '' %>"
                           required
                           placeholder="Digite o email">
                </div>
            </div>
            
            <div class="form-group">
                <button type="submit" class="btn btn-primary">
                    <i class="fas fa-save"></i>
                    <%= usuario && usuario.id ? 'Atualizar Usuário' : 'Cadastrar Usuário' %>
                </button>
                <a href="/usuarios" class="btn btn-secondary">
                    <i class="fas fa-times"></i> Cancelar
                </a>
            </div>
        </form>
    </div>
</div>

<%- include('../partials/footer') %>
